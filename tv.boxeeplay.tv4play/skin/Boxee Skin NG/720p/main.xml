<?xml version="1.0" encoding="utf-8" ?>
<window type="window" id="14000">
	<onload lang="python">
<![CDATA[
import mc
import tv4mc

app = mc.GetApp()
config = app.GetLocalConfig()

parameters = app.GetLaunchedWindowParameters() 
list = mc.GetActiveWindow().GetList(120)
id = parameters["id"]
mc.LogInfo("main:1")
if (config.GetValue("CategoryId") != id) or len(list.GetItems()) == 0:
	mc.LogInfo("main:2")
	items = tv4mc.GetTitles(id)
	mc.LogInfo("main:3")
	list.SetItems(items)
	mc.LogInfo("main:4")
	config.SetValue("CategoryId", id)

]]>
	</onload>
    <defaultcontrol always="true">120</defaultcontrol>
    <controls>
        <include>Common_Background</include>
        <include>Common_Status</include>
        <control type="label" id="122">
			<visible>Window.IsVisible(DialogProgress.xml)</visible>
            <posx>32</posx>
            <posy>32</posy>
            <width>320</width>
            <height>48</height>
            <textcolor>grey</textcolor>
            <label>Laddar in program</label>
        </control>

		<control type="panel" id="120">
            <content type="action">
				<onclick lang="python">
<![CDATA[

mc.ShowDialogWait()

list = mc.GetActiveWindow().GetList(120)
index = list.GetFocusedItem()
item = list.GetItem(index)

app = mc.GetApp()
params = mc.Parameters()
params['id'] = tv4mc.GetTitleId(item)
app.ActivateWindow(14001, params)

mc.HideDialogWait()
]]>
				</onclick>
			</content>
			<visible>true</visible>
			<posx>10</posx>
			<posy>10</posy>
			<width>1200</width>
			<height>600</height>
            <pagecontrol></pagecontrol>
            <scrolltime>100</scrolltime>
            <preloaditems>4</preloaditems>
            <orientation>vertical</orientation>
			<orientation>horizontal</orientation>
			<itemlayout width="200" height="150">
                <control type="image">
                    <posx>16</posx>
                    <posy>5</posy>
                    <width>168</width>
                    <height>95</height>
                    <align>center</align>
                    <aligny>center</aligny>
                    <aspectratio align="left">keep</aspectratio>
                    <texture>$INFO[ListItem.Thumb]</texture>
                </control>
				<control type="label">
					<posx>16</posx>
					<posy>105</posy>
					<width>168</width>
					<height>50</height>
					<align>left</align>
					<aligny>top</aligny>
					<textcolor>grey</textcolor>
					<label>$INFO[ListItem.Label]</label>
				</control>
			</itemlayout>
			<focusedlayout width="200" height="150">
				<control type="image">
                    <posx>0</posx>
                    <posy>0</posy>
                    <width>200</width>
                    <height>150</height>
					<texture>focused-item.png</texture>
				</control>
                <control type="image">
                    <posx>16</posx>
                    <posy>5</posy>
                    <width>168</width>
                    <height>95</height>
                    <align>center</align>
                    <aligny>center</aligny>
                    <aspectratio align="left">keep</aspectratio>
                    <texture>$INFO[ListItem.Thumb]</texture>
                </control>
				<control type="label">
					<posx>16</posx>
					<posy>105</posy>
					<width>168</width>
					<height>50</height>
					<align>left</align>
					<aligny>top</aligny>
					<textcolor>white</textcolor>
					<label>$INFO[ListItem.Label]</label>
				</control>
			</focusedlayout>
		</control>

		<!-- selected item details panel -->
            <control type="label">
				<visible>Control.HasFocus(120)</visible>
                <posx>32</posx>
                <posy>640</posy>
                <width>1200</width>
                <height>70</height>
                <textcolor>grey</textcolor>
                <label>[B]$INFO[Container(120).ListItem.Label][/B] $INFO[Container(120).ListItem.property(description)]</label>
                <wrapmultiline>true</wrapmultiline>
            </control>
    </controls>
</window>

